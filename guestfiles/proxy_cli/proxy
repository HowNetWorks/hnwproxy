#!/usr/bin/env bash
# script to run hnwProxy modules

set -e

SCRIPTDIR=/usr/local/bin
MODULEDIR=$SCRIPTDIR/proxy_modules

usage()
{
  echo "USAGE"
  echo "  proxy <module_name> [options]"
  echo "  proxy <show>"
  echo
  echo "OPTIONS"
  echo "  module_name   Run this module."
  echo "  show          List available modules."
}

if [ $# -eq 0 ]
then
  usage
else
  case $1 in
    "show")
      printf "\nAvailable modules:\n\n"
      cat $MODULEDIR/*/description
      ;;
    *)
      if [ -f $MODULEDIR/$1/$1 ]
      then
        # run module with options
        sudo $MODULEDIR/$1/$1 $2 $3 $4
      else
        usage
        fi
      ;;
    esac
fi